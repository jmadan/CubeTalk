*{ Display a article in one of these modes: 'full', 'home' or 'teaser' }*

#{list items:_article, as:'articleList'}
<div class="article ${_as == 'teaser' ? 'teaser' : ''}">
    <h2 class="article-title">
        <a href="/articles/${articleList.title.replace(' ','_')}">${articleList.title}</a>
    </h2>
    <div class="article-metadata">
        <span class="article-author">by ${articleList.author.firstName}</span>,
        <span class="article-date">${articleList.submit_date.format('dd MMM yyyy')}</span>
        #{if _as != 'full'}
            <span class="article-comments">
                &nbsp;-&nbsp; ${articleList.comments.size() ?: 'no'}
                comment${articleList.comments.size().pluralize()}
                #{if articleList.comments}
                    , latest by ${articleList.comments[0].userAlias}
                #{/if}
            </span>
        #{/if}
    </div>
    #{if _as != 'teaser'}
        <div class="article-content">
            <div class="about">Detail: </div>
            ${articleList.content.nl2br()} ... -> Read More
        </div>
    #{/if}
</div>
 
#{if _as == 'full'}
    <div class="comments">
        <h3>
            ${_article.comments.size() ?: 'no'} 
            comment${_article.comments.size().pluralize()}
        </h3>
        
        #{list items:_article.comments, as:'comment'}
            <div class="comment">
                <div class="comment-metadata">
                    <span class="comment-author">by ${comment.userAlias},</span>
                    <span class="comment-date">
                        ${comment.created_on.format('dd MMM yy')}
                    </span>
                </div>
                <div class="comment-content">
                    <div class="about">Detail: </div>
                    ${comment.comment.escape().nl2br()}
                </div>
            </div>
        #{/list}

        <h3>Post a comment</h3>

            #{form @Application.postComment(_article.id)}
                <p>
                    ${session.get("userAlias")}
                </p>
                <p>
                    <label for="content">comment: </label>
                    <textarea name="content" id="content" rows="4" cols="20"></textarea>
                </p>
                <p>
                    <input type="submit" value="Post comment" />
                </p>
            #{/form}

    </div>
#{/if}
#{/list}

     <!--<div class="company-list">-->
        <!--<div class="list-header">-->
            <!--Company Reviews-->
        <!--</div>-->
        <!--<div class="review-list">-->
            <!--<ul id="company-reviews">-->
                <!--#{if _articles == null}-->
                    <!--No Company List-->
                <!--#{/if}-->
                <!--#{else}-->
                <!--#{list items:_companies, as:'company'}-->
                    <!--<li>-->
                        <!--${company.title}-->
                    <!--</li>-->
                <!--#{/list}-->
                <!--#{/else}-->
            <!--</ul>-->
        <!--</div>-->
    <!--</div>-->